import z from"./index-5b041fc5.js";import B from"./tip-17b36946.js";import{C as H}from"./cropper-48b5700c.js";import{d as v,e as u,f as _,g as n,r as y,a as M,c as V,w as d,i as l,a9 as U,u as p,ac as T,h as f,_ as I}from"./index-b9c76e4f.js";var g=v({name:"Download"});const N={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},R=n("path",{fill:"currentColor",d:"M160 832h704a32 32 0 1 1 0 64H160a32 32 0 1 1 0-64zm384-253.696 236.288-236.352 45.248 45.248L508.8 704 192 387.2l45.248-45.248L480 584.704V128h64v450.304z"},null,-1);function A(r,m,h,o,s,c){return u(),_("svg",N,[R])}g.render=A;g.__file="packages/components/Download.vue";const E=g;var w=v({name:"Picture"});const F={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},P=n("path",{fill:"currentColor",d:"M160 160v704h704V160H160zm-32-64h768a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H128a32 32 0 0 1-32-32V128a32 32 0 0 1 32-32z"},null,-1),q=n("path",{fill:"currentColor",d:"M384 288q64 0 64 64t-64 64q-64 0-64-64t64-64zM185.408 876.992l-50.816-38.912L350.72 556.032a96 96 0 0 1 134.592-17.856l1.856 1.472 122.88 99.136a32 32 0 0 0 44.992-4.864l216-269.888 49.92 39.936-215.808 269.824-.256.32a96 96 0 0 1-135.04 14.464l-122.88-99.072-.64-.512a32 32 0 0 0-44.8 5.952L185.408 876.992z"},null,-1);function W(r,m,h,o,s,c){return u(),_("svg",F,[P,q])}w.render=W;w.__file="packages/components/Picture.vue";const j=w;var x=v({name:"Upload"});const G={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},J=n("path",{fill:"currentColor",d:"M160 832h704a32 32 0 1 1 0 64H160a32 32 0 1 1 0-64zm384-578.304V704h-64V247.296L237.248 490.048 192 444.8 508.8 128l316.8 316.8-45.312 45.248L544 253.696z"},null,-1);function K(r,m,h,o,s,c){return u(),_("svg",G,[J])}x.render=K;x.__file="packages/components/Upload.vue";const O=x,Q={class:"container"},S={class:"box"},X=["src"],Y={class:"box"},Z={class:"handle-box"},ee=v({__name:"index",props:{layer:null},emits:["update:modelValue"],setup(r,{emit:m}){const h=r;let o=y(null);const s="image"+new Date().getTime(),c="preview"+new Date().getTime();let $=y(null);M(()=>{C()});const C=()=>{o.value&&o.value.destroy();const e=document.getElementById(s);o.value=new H(e,{preview:"."+c})},k=(e,a)=>{L(e),$.value.clearFiles()},L=e=>{let a=new FileReader;a.readAsDataURL(e.raw),a.onload=function(t){document.getElementById(s).setAttribute("src",this.result),C()}},D=()=>{var i;const e=(i=o.value)==null?void 0:i.getCroppedCanvas({maxWidth:4096,maxHeight:4096}),a=(e==null?void 0:e.toDataURL())||"",t=document.createElement("a");t.href=a,t.download="download.png",t.click()},b=()=>{var t;const e=(t=o.value)==null?void 0:t.getCroppedCanvas({maxWidth:4096,maxHeight:4096}),a=e==null?void 0:e.toDataURL();m("update:modelValue",a),h.layer.show=!1};return(e,a)=>{const t=V("el-button"),i=V("el-upload");return u(),_(z,{layer:r.layer,width:"1000"},{default:d(()=>[l("div",Q,[l("div",S,[l("img",{id:s,class:"default-img",src:e.modelValue},null,8,X)]),l("div",Y,[l("div",{class:U([c,"preview"])})])]),p(o)?(u(),_(B,{key:0,cropper:p(o)},null,8,["cropper"])):T("",!0),l("div",Z,[n(i,{class:"upload-demo",action:"","auto-upload":!1,accept:"image/*",ref_key:"uploadDom",ref:$,"on-change":k},{default:d(()=>[n(t,{type:"primary",icon:p(O),style:{"margin-right":"10px"}},{default:d(()=>[f("上传图片")]),_:1},8,["icon"])]),_:1},512),n(t,{type:"primary",icon:p(E),onClick:D},{default:d(()=>[f("下载截图至本地")]),_:1},8,["icon"]),n(t,{type:"primary",icon:p(j),onClick:b},{default:d(()=>[f("保存截图")]),_:1},8,["icon"])])]),_:1},8,["layer"])}}});const se=I(ee,[["__scopeId","data-v-245012d5"]]);export{se as default};
